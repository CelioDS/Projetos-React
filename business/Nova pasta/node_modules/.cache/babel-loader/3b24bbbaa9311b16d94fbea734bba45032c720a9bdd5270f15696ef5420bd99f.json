{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/celio/node/bd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/celio/node/bd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/celio/node/bd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link}from\"react-router-dom\";import style from\"./Visualizar.module.css\";import{BsLink,BsClipboardCheck}from\"react-icons/bs\";import{useEffect,useState}from\"react\";import Loading from\"../layout/Loading\";import ContatosMascara from\"../mascara/ContatosMascara\";import Container from\"../layout/Container\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Visualizar(){var _useState=useState(\"Copiar\"),_useState2=_slicedToArray(_useState,2),copy=_useState2[0],setCopy=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),database=_useState4[0],setDatabase=_useState4[1];// Estado para armazenar os dados\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// Estado para armazenar o erro, se ocorrer\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:try{setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/usuarios\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;// Converte a resposta em formato JSON\nsetDatabase(data);// Armazena os dados no estado\ncase 7:case\"end\":return _context.stop();}},_callee);})),200);}catch(error){setError(\"Ocorreu um erro ao obter os dados.\");// Define a mensagem de erro\nconsole.log(\"Erro ao obter os dados\",error);}case 1:case\"end\":return _context2.stop();}},_callee2);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();// Chama a função para buscar os dados quando o componente é montado\n},[]);var handleCopy=function handleCopy(text){navigator.clipboard.writeText(text);setCopy(\"Copiou\");setTimeout(function(){setCopy(\"Copiar\");},500);};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:style.father,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.texto,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Empresas cadastradas.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Acesse o link abaixo para ter informa\\xE7\\xF5es completas.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Aqui est\\xE3o as empresas cadastradas\"})]}),error?/*#__PURE__*/ // Se ocorreu um erro ao obter os dados, exibe a mensagem de erro\n_jsxs(\"p\",{children:[\"Ocorreu um erro: \",error]}):database?/*#__PURE__*/ // Se os dados foram obtidos com sucesso\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nomes\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Localidade\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contatos\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:database.map(function(_ref3){var id=_ref3.id,nome=_ref3.nome,localidade=_ref3.localidade,contatos=_ref3.contatos;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:id}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/visualizar/\".concat(id,\"/\").concat(nome),children:[/*#__PURE__*/_jsx(BsLink,{className:style.icon}),nome]},id)}),/*#__PURE__*/_jsx(\"td\",{children:localidade}),/*#__PURE__*/_jsxs(\"td\",{className:style.contatos,children:[ContatosMascara(contatos),/*#__PURE__*/_jsxs(\"button\",{className:style.btn,onClick:function onClick(){return handleCopy(contatos);},children:[/*#__PURE__*/_jsx(\"p\",{className:style.copy,children:copy}),/*#__PURE__*/_jsx(BsClipboardCheck,{})]})]})]},id);})})]}),database.length===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sem cadastros...\"}),\" \",/*#__PURE__*/_jsx(Loading,{})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Carregando dados...\"}),/*#__PURE__*/_jsx(Loading,{})]})]})});}","map":{"version":3,"names":["Link","style","BsLink","BsClipboardCheck","useEffect","useState","Loading","ContatosMascara","Container","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Visualizar","_useState","_useState2","_slicedToArray","copy","setCopy","_useState3","_useState4","database","setDatabase","_useState5","_useState6","error","setError","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_callee2$","_context2","prev","next","setTimeout","_callee","response","data","_callee$","_context","fetch","method","headers","sent","json","stop","console","log","apply","arguments","handleCopy","text","navigator","clipboard","writeText","children","className","father","texto","map","_ref3","id","nome","localidade","contatos","to","concat","icon","btn","onClick","length"],"sources":["C:/Users/celio/node/bd/src/componentes/routes/Visualizar.js"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport style from \"./Visualizar.module.css\";\r\nimport { BsLink, BsClipboardCheck } from \"react-icons/bs\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Loading from \"../layout/Loading\";\r\nimport ContatosMascara from \"../mascara/ContatosMascara\";\r\n\r\nimport Container from \"../layout/Container\";\r\n\r\nexport default function Visualizar() {\r\n  const [copy, setCopy] = useState(\"Copiar\");\r\n\r\n  const [database, setDatabase] = useState(null); // Estado para armazenar os dados\r\n  const [error, setError] = useState(null); // Estado para armazenar o erro, se ocorrer\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setTimeout(async () => {\r\n        const response = await fetch(\"http://localhost:5000/usuarios\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n        const data = await response.json(); // Converte a resposta em formato JSON\r\n        setDatabase(data); // Armazena os dados no estado\r\n      }, 200);\r\n    } catch (error) {\r\n      setError(\"Ocorreu um erro ao obter os dados.\"); // Define a mensagem de erro\r\n      console.log(\"Erro ao obter os dados\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData(); // Chama a função para buscar os dados quando o componente é montado\r\n  }, []);\r\n\r\n  const handleCopy = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopy(\"Copiou\");\r\n    setTimeout(() => {\r\n      setCopy(\"Copiar\");\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <div className={style.father}>\r\n        <div className={style.texto}>\r\n          <h1>Empresas cadastradas.</h1>\r\n          <p>Acesse o link abaixo para ter informações completas.</p>\r\n          <p>Aqui estão as empresas cadastradas</p>\r\n        </div>\r\n\r\n        {error ? ( // Se ocorreu um erro ao obter os dados, exibe a mensagem de erro\r\n          <p>Ocorreu um erro: {error}</p>\r\n        ) : database ? ( // Se os dados foram obtidos com sucesso\r\n          <div>\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Id</th>\r\n                  <th>Nomes</th>\r\n                  <th>Localidade</th>\r\n                  <th>Contatos</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {database.map(({ id, nome, localidade, contatos }) => (\r\n                  <tr key={id}>\r\n                    <td>{id}</td>\r\n                    <td>\r\n                      <Link to={`/visualizar/${id}/${nome}`} key={id}>\r\n                        <BsLink className={style.icon} />\r\n                        {nome}\r\n                      </Link>\r\n                    </td>\r\n                    <td>{localidade}</td>\r\n                    <td className={style.contatos}>\r\n                      {ContatosMascara(contatos)}\r\n                      <button\r\n                        className={style.btn}\r\n                        onClick={() => handleCopy(contatos)}\r\n                      >\r\n                        <p className={style.copy}>{copy}</p>\r\n                        <BsClipboardCheck />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            {database.length === 0 && (\r\n              <>\r\n                <p>Sem cadastros...</p> <Loading />\r\n              </>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <p>Carregando dados...</p>\r\n            <Loading />\r\n          </>\r\n        )}\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}